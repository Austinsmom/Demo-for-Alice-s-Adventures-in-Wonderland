<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <title>Demo for Alice's Adventures in Wonderland, by Lewis Carroll</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="css/style.css" media="all" />
</head>
<body>
  <div class="keyframes">
    <!-- <div class="keyframe--intro"></div> -->
    <div class="keyframe--alice"></div>
    <div class="keyframe--outro"></div>
  </div>
  <!-- overlay for fade to black -->
  <div id="overlay"></div>

  <!-- introduction slide and feature detect message -->
  <div id="intro">
    <header>Demo for Alice in Wonderland <span>by Lewis Carroll</span></header>
    <p>
      <a href="http://blogs.adobe.com/webplatform/2013/10/23/css-shapes-visual-storytelling/" target="_blank">Using CSS Shapes</a> to enhance visual storytelling.
    </p>
    <div class="warning">
      <p>
        This example demonstrates cutting-edge features that the <a href="http://html.adobe.com/webplatform/" target="_blank">Adobe Web Platform Team</a> is working on. To see these features in action, <a href="http://html.adobe.com/webplatform/enable/#section-chrome-canary" target="_blank">enable CSS Shapes</a> in the <a href="https://www.google.com/intl/en/chrome/browser/canary.html">Google Chrome Canary</a> browser.
        <a href="http://html.adobe.com/webplatform/layout/shapes/browser-support/" target="_blank">CSS Shapes Support Matrix</a>.
        <br><br>
        <strong>Update, May 2014:</strong> Support for CSS <code>shape-inside</code>, which this example uses, is only available up until the following nightly builds: <a href="http://builds.nightly.webkit.org/files/trunk/mac/WebKit-SVN-r166290.dmg">WebKit r166290</a> and <a href="http://commondatastorage.googleapis.com/chromium-browser-continuous/index.html?path=Mac/260092/">Chromium 260092</a>. Widespread support will return at a later date.
      </p>

    </div>

    <div class="direction">
      <em>scroll to begin</em>
    </div>
    <footer>
      <a href="http://html.adobe.com" class="adobe-logo" target="_blank">html.adobe.com</a>
      <a href="http://ultranoir.com" class="ultranoir-logo" target="_blank">ultranoir.com</a>
    </footer>
  </div>

  <div class="wrapper">

    <div class="scene--alice">
      <div class="content">

        <!-- Using two placeholder floated elements with shape-outside to simulate a shape-inside. Purists, look away! -->
        <div class="shape-shim--left"></div>
        <div class="shape-shim--right"></div>

        <h1>
          <span>Alice in Wonderland</span>
        </h1>

        <p>Alice was beginning to get very tired of sitting by her sister on the
          bank, and of having nothing to do: once or twice she had peeped into the
          book her sister was reading, but it had no pictures or conversations in
          it, 'and what is the use of a book,' thought Alice 'without pictures or
          conversation?'
          <br /><br />So she was considering in her own mind whether the pleasure
          of making a daisy-chain would be worth the trouble of getting up and
          picking the daisies, when suddenly a White Rabbit with pink eyes ran
          close by her.
          <br /><br />In another moment down went Alice after it, never once considering how
          in the world she was to get out again.
        </p>
      </div>
    </div><!-- end .scene -->

  </div><!-- end .wrapper -->

  <script>

  (function(){
    // helpers
    var $ = document.querySelector.bind(document);
    Node.prototype.on = window.on = function(event, fn){ this.addEventListener(event, fn, false); };

    var $sceneEl = $('.scene--alice');
    var $keyframeEl = $('.keyframe--alice');
    var $textEl = $('.scene--alice p');
    var $titleEl = $('h1');
    var textOffsetMultiplier = 1.4;
    var textOffsetLimit = parseInt(window.getComputedStyle($textEl).height, 10);

    $keyframeEl.style.height = window.getComputedStyle($sceneEl).height;

    var minOff = $keyframeEl.offsetTop,
        maxOff = $keyframeEl.offsetTop + parseInt(window.getComputedStyle($keyframeEl).height, 10) - window.innerHeight;

    var minTextOff = $titleEl.offsetTop + minOff,
        maxTextOff = minTextOff + parseInt(window.getComputedStyle($textEl).height, 10);


    window.on('scroll', function(e){
      window.requestAnimationFrame(function(){

        if (window.scrollY > minTextOff && window.scrollY < maxTextOff){
          $textEl.style.paddingTop = (window.scrollY - $titleEl.offsetTop - minOff) * textOffsetMultiplier + 'px';
        }

        if (window.scrollY > minOff && window.scrollY < maxOff){
          var yOffset = (minOff - window.scrollY) + "px";
          $sceneEl.style.transform = ['translate3d(0, ', yOffset, ', 0)'].join('');
        }
      })
    });

  })()

  </script>
  <script>
    (function(){
      // typekit asyc loading
      var config = {
        kitId: 'fwk6qwz',
        scriptTimeout: 1500
      };
      var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
    })()

    // force scroll to top on reload
    document.addEventListener('DOMContentLoaded', function(){
      window.setTimeout(function(){
        window.scrollTo(0,0)
      }, 50);
    });

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45111913-1', 'adobe-webplatform.github.io');
    ga('send', 'pageview');
  </script>
</body>
</html>
